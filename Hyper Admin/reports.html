<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Patient Reports</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="styles.css" rel="stylesheet" />
  <style>
    body { background: #f7f9fa; }
    .content-wrap { max-width: 1100px; margin: 2rem auto; }
    h3 { letter-spacing: 0.5px; }
    .summary-card h5 { font-weight: 600; }
    .summary-card h3 { font-weight: 700; }
    .table-actions button { margin-right: 6px; }
    .badge-status {
      padding: 0.3em 0.7em;
      border-radius: 14px;
      font-size: 0.9em;
      font-weight: 600;
      color: #fff;
    }
    .badge-pending { background-color: #ffc107; color: #212529; }
    .badge-ongoing { background-color: #17a2b8; }
    .badge-completed { background-color: #28a745; }
    .badge-cancelled { background-color: #dc3545; }
    .modal .form-label { font-weight: 500; }
  </style>
</head>
<body>
  <div class="content-wrap">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <a href="dashboard.html" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
      </a>
      <h3 class="mb-0">Patient Reports</h3>
      <button class="btn btn-outline-secondary" id="exportReportsBtn">
        <i class="fas fa-file-csv"></i> Export CSV
      </button>
    </div>

    <!-- Summary Cards -->
    <div class="row text-center mb-4 g-3">
      <div class="col-md-3">
        <div class="card summary-card bg-primary text-white">
          <div class="card-body">
            <h5>Total Patients</h5>
            <h3 id="totalPatients">0</h3>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card summary-card bg-warning text-dark">
          <div class="card-body">
            <h5>Pending</h5>
            <h3 id="pendingCount">0</h3>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card summary-card bg-info text-white">
          <div class="card-body">
            <h5>Ongoing</h5>
            <h3 id="ongoingCount">0</h3>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card summary-card bg-success text-white">
          <div class="card-body">
            <h5>Completed</h5>
            <h3 id="completedCount">0</h3>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters -->
    <div class="row mb-3 g-3">
      <div class="col-md-2">
        <label for="statusFilter" class="form-label">Status</label>
        <select class="form-select" id="statusFilter">
          <option value="all" selected>All</option>
          <option value="pending">Pending</option>
          <option value="ongoing">Ongoing</option>
          <option value="completed">Completed</option>
          <option value="cancelled">Cancelled</option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="doctorFilter" class="form-label">Assigned Doctor</label>
        <select class="form-select" id="doctorFilter">
          <option value="all" selected>All Doctors</option>
          <!-- Filled by JS -->
        </select>
      </div>
      <div class="col-md-3">
        <label for="dateRangeFilter" class="form-label">Date Range</label>
        <select class="form-select" id="dateRangeFilter">
          <option value="all" selected>All Time</option>
          <option value="7">Last 7 Days</option>
          <option value="30">Last 1 Month</option>
          <option value="180">Last 6 Months</option>
          <option value="365">Last 1 Year</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="searchInput" class="form-label">Search</label>
        <input type="search" id="searchInput" class="form-control" placeholder="Patient Name, ID, or Phone" autocomplete="off" />
      </div>
    </div>

    <!-- Report Table -->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th>Patient ID</th>
            <th>Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>Complaint</th>
            <th>Status</th>
            <th>Doctor(s)</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="reportTableBody"></tbody>
      </table>
    </div>

    <!-- Status Chart -->
    <h5 class="mt-4 mb-3">Appointment Status Chart</h5>
    <canvas id="statusChart" height="120"></canvas>

  </div>

  <!-- Patient View Modal -->
  <div class="modal fade" id="viewPatientModal" tabindex="-1" aria-labelledby="viewPatientModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="viewPatientModalLabel">Patient Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p><strong>Patient ID:</strong> <span id="modalPatientId"></span></p>
          <p><strong>Name:</strong> <span id="modalPatientName"></span></p>
          <p><strong>Age:</strong> <span id="modalPatientAge"></span></p>
          <p><strong>Gender:</strong> <span id="modalPatientGender"></span></p>
          <p><strong>Complaint:</strong> <span id="modalPatientComplaint"></span></p>
          <p><strong>Status:</strong> <span id="modalPatientStatus"></span></p>
          <p><strong>Doctor(s) Assigned:</strong> <span id="modalPatientDoctors"></span></p>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="reports.js"></script>
</body>
</html>